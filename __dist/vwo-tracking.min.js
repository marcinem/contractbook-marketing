const MAX_RETRIES=3,RETRY_DELAY=2e3,getCookie=e=>{const o=`; ${document.cookie}`.split(`; ${e}=`);return 2===o.length?o.pop().split(";").shift():null},checkVWO=()=>{getCookie("_vis_opt_out")?console.log("::: Opted out of VWO"):window._vwo_exp_ids?(captureExperiments(),checkHubspotFormAndRun(),sendEventsToPlausible(),console.log("::: VWO started")):setTimeout(checkVWO,150)},captureExperiments=async(e=0)=>{const o=window._vwo_exp_ids;if(!o)return;let t=[];for(const n of o){const o=window._vwo_exp[n];if(!o)continue;const{combination_chosen:s,comb_n:i,status:a,name:r,type:p}=o,c=i[s];if(!c&&e<3)return setTimeout((()=>captureExperiments(e+1)),2e3);"RUNNING"===a&&t.push({id:n,name:r,type:p,variation:c})}const n=[...JSON.parse(localStorage.getItem("vwo_experiments"))||[],...t].slice(0,5);localStorage.setItem("vwo_experiments",JSON.stringify(n))},updateVwoHubspotFields=()=>{const e=JSON.parse(localStorage.getItem("vwo_experiments"))||[],o=(e,o)=>{const t=document.querySelector(`input[name="${e}"]`);t&&(t.value=o)};o("vwo_experience_names",e.map((e=>e.name)).join()),o("vwo_impression_type",e.map((e=>e.type)).join()),o("vwo_variation_names",e.map((e=>e.variation)).join())},checkHubspotFormAndRun=()=>{document.querySelector('form[id^="hsForm"]')?updateVwoHubspotFields():window.addEventListener("message",(e=>{"hsFormCallback"===e.data?.type&&"onFormReady"===e.data?.eventName&&updateVwoHubspotFields()}))},sendEventsToPlausible=()=>{window.addEventListener("load",(()=>{setTimeout((()=>{const e=JSON.parse(localStorage.getItem("vwo_experiments"));e&&e.forEach((({name:e,variation:o})=>{plausible("VWO",{props:{experiment:`${e} | ${o}`}})}))}),2600)}))};checkVWO();