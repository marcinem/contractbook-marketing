const MAX_RETRIES=3,RETRY_DELAY=2e3,getCookie=e=>{const t=`; ${document.cookie}`.split(`; ${e}=`);return 2===t.length?t.pop().split(";").shift():null},checkVWO=()=>{getCookie("_vis_opt_out")?console.log("::: Opted out of VWO"):window._vwo_exp_ids?(captureExperiments(),checkHubspotFormAndRun(),sendEventsToPlausible(),console.log("::: VWO started")):setTimeout(checkVWO,150)},captureExperiments=(e=0)=>{const t=window._vwo_exp_ids;let o=[];if(t)for(let n=0;n<t.length;n++){const s=t[n],i=window._vwo_exp[s];if(i){const t=i.combination_chosen,n=i.comb_n[t];if(!n){e<3?setTimeout((()=>captureExperiments(e+1)),2e3):console.warn(`Max retries reached. Unable to capture experiment with ID: ${s}`);continue}"RUNNING"===i.status&&o.push({id:s,name:i.name,type:i.type,variation:n})}}const n=JSON.parse(localStorage.getItem("vwo_experiments"))||[];o.forEach((e=>{const t=n.findIndex((t=>t.id===e.id));-1===t?(n.unshift(e),n.length>5&&n.pop()):Object.assign(n[t],e)})),localStorage.setItem("vwo_experiments",JSON.stringify(n))},updateVwoHubspotFields=()=>{const e=JSON.parse(localStorage.getItem("vwo_experiments"))||[],t=(e,t)=>{const o=document.querySelector(`input[name="${e}"]`);o&&(o.value=t)};t("vwo_experience_names",e.map((e=>e.name)).join()),t("vwo_impression_type",e.map((e=>e.type)).join()),t("vwo_variation_names",e.map((e=>e.variation)).join())},checkHubspotFormAndRun=()=>{document.querySelector('form[id^="hsForm"]')?updateVwoHubspotFields():window.addEventListener("message",(e=>{"hsFormCallback"===e.data?.type&&"onFormReady"===e.data?.eventName&&updateVwoHubspotFields()}))},sendEventsToPlausible=()=>{window.addEventListener("load",(()=>{setTimeout((()=>{const e=JSON.parse(localStorage.getItem("vwo_experiments"));e&&e.forEach((({name:e,variation:t})=>{plausible("VWO",{props:{experiment:`${e} | ${t}`}})}))}),2600)}))};checkVWO();