const getCookie=e=>{const o=`; ${document.cookie}`.split(`; ${e}=`);return 2===o.length?o.pop().split(";").shift():null},checkVWO=()=>{getCookie("_vis_opt_out")?console.log("::: Opted out of VWO"):window.VWO?(captureExperiments(),checkHubspotFormAndRun(),sendEventsToPlausible()):setTimeout(checkVWO,2e3)},captureExperiments=()=>{let e={};window.VWO=window.VWO||[],VWO.push(["onEventReceive","vA",function(o){var t=o[1],n=o[2],s=_vwo_exp[t].name,i=_vwo_exp[t].comb_n[n],a=_vwo_exp[t].type;void 0!==_vwo_exp[t].comb_n[n]&&["VISUAL_AB","VISUAL","SPLIT_URL","SURVEY"].indexOf(_vwo_exp[t].type)>-1&&(e[id]={experimentId:t,name:s,type:a,variation:i},console.log(t+":"+s+i+a))}]);const o=JSON.parse(localStorage.getItem("vwo_experiments"))||[],t=Object.fromEntries(o.map((e=>[e.id,e])));Object.assign(t,e);const n=Object.values(t);localStorage.setItem("vwo_experiments",JSON.stringify(n))},updateVwoHubspotFields=()=>{const e=JSON.parse(localStorage.getItem("vwo_experiments"))||[],o=(e,o)=>{const t=document.querySelector(`input[name="${e}"]`);t&&(t.value=o)};o("vwo_experience_names",e.map((e=>e.name)).join()),o("vwo_impression_type",e.map((e=>e.type)).join()),o("vwo_variation_names",e.map((e=>e.variation)).join())},checkHubspotFormAndRun=()=>{document.querySelector('form[id^="hsForm"]')?updateVwoHubspotFields():window.addEventListener("message",(e=>{"hsFormCallback"===e.data?.type&&"onFormReady"===e.data?.eventName&&updateVwoHubspotFields()}))},sendEventsToPlausible=()=>{window.addEventListener("load",(()=>{setTimeout((()=>{const e=JSON.parse(localStorage.getItem("vwo_experiments"));e&&e.forEach((({name:e,variation:o})=>{plausible("VWO",{props:{experiment:`${e} | ${o}`}})}))}),2e3)}))};setTimeout(checkVWO,2e3);